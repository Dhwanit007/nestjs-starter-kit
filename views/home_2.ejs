<%- contentFor('HeaderCss') %>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
/>
<%- contentFor('body') %>
<div>
  <div class="container row">
    <table id="user-table" class="display"></table>
  </div>
  <hr class="py-2" />
  <div class="container row">
    <div class="col-4">
      <div id="chart-age"></div>
    </div>
    <div class="col-4">
      <div id="chart-gender"></div>
    </div>
    <div class="col-4">
      <div id="birthday-calender"></div>
      <div class="modal fade" id="eventModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content text-dark">
            <div class="modal-header">
              <h5 class="modal-title" id="eventTitle"></h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
              ></button>
            </div>
            <div class="modal-body">
              <p>
                <strong>Details:</strong>
                <span id="eventDescription"></span>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<%- contentFor('FooterJs') %>

<link
  href="https://cdn.datatables.net/v/bs5/jq-3.7.0/dt-2.3.4/sp-2.3.5/sl-3.1.3/datatables.min.css"
  rel="stylesheet"
  integrity="sha384-6EuzD/mawfVL9CxTC6PpTC8TSynZsJk3YaiS9e/Wx7F8Wc0aAPcE7mL/UyO56DEh"
  crossorigin="anonymous"
/>

<script
  src="https://cdn.datatables.net/v/bs5/jq-3.7.0/dt-2.3.4/sp-2.3.5/sl-3.1.3/datatables.min.js"
  integrity="sha384-bWwnMIperFy4XITIyXpLSmhNyMa4JoQ3gkaG+xCAnn4FKcCynyVlImUQ2yEO2Eol"
  crossorigin="anonymous"
></script>

<script src="/assets/js/home2/home2-datatable.js"></script>
<script>
  const ageChartData = JSON.parse('<%- JSON.stringify(ageChartData) %>');
  const genderChartData = JSON.parse('<%- JSON.stringify(genderChartData) %>');

  const ageChart = new ApexCharts(document.querySelector('#chart-age'), {
    chart: {
      type: 'bar',
    },
    series: [
      {
        name: 'count',
        data: Object.values(ageChartData),
      },
    ],
    xaxis: {
      categories: Object.keys(ageChartData),
    },
  });

  const genderChart = new ApexCharts(document.querySelector('#chart-gender'), {
    series: Object.values(genderChartData),
    chart: {
      type: 'pie',
    },
    labels: Object.keys(genderChartData),
    // responsive: [
    //   {
    //     breakpoint: 480,
    //     options: {
    //       chart: {
    //         width: 200,
    //       },
    //       legend: {
    //         position: 'bottom',
    //       },
    //     },
    //   },
    // ],
  });

  ageChart.render();
  genderChart.render();

  document.addEventListener('DOMContentLoaded', function () {
    var calendarEl = document.getElementById('birthday-calender');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      events: [
        {
          title: 'ðŸŽ‚ My Birthday',

          description: 'Annual Birthday Celebration',
        },
      ],
      eventClick: function (info) {
        info.jsEvent.preventDefault();

        // Fill modal details
        document.getElementById('eventTitle').textContent = info.event.title;
        document.getElementById('eventDescription').textContent =
          info.event.extendedProps.description ||
          info.event.extendedProps.department ||
          'N/A';

        // Show Bootstrap modal
        var modal = new bootstrap.Modal(document.getElementById('eventModal'));
        modal.show();
      },
    });
    calendar.render();
  });
</script>
