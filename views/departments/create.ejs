<%- contentFor('HeaderCss') %>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <style>
        #departmentsTable_filter {
            float: right;
        }
    </style>
    <%- contentFor('body') %>

        <div>
            <div class="card shadow">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h4 class="mb-0">Create Department</h4>
                    <a href="/departments" class="btn btn-primary btn">Back</a>
                </div>

                <div class="card-body">

                    <!-- SUCCESS / ERROR MESSAGE -->
                    <% if (message && message.length) { %>
                        <div class="alert alert-success">
                            <%= message %>
                        </div>
                        <% } %>

                            <% if (error && error.length) { %>
                                <div class="alert alert-danger">
                                    <%= error %>
                                </div>
                                <% } %>

                                    <form id="createDepartmentForm" method="post" action="/departments/create">
                                        <!-- NAME -->
                                        <div class="mb-3">
                                            <label class="form-label">Department Name <span
                                                    class="text-danger">*</span></label>
                                            <input type="text" name="name" id="name" class="form-control"
                                                placeholder="Enter department name" autocomplete="name" />
                                        </div>

                                        <!-- DESCRIPTION -->
                                        <div class="mb-3">
                                            <label class="form-label">Description</label>
                                            <textarea name="description" class="form-control" rows="3"
                                                placeholder="Optional description"></textarea>
                                        </div>

                                        <!-- ASSIGN EMPLOYEES -->
                                        <!-- <div class="mb-3">
                                            <label class="form-label">Assign Employees</label>
                                            <select name="assignedEmployeeIds[]" id="assignedEmployeeIds"
                                                class="form-control" multiple>
                                                <% if (employees && employees.length) { %>
                                                    <% employees.forEach(emp=> { %>
                                                        <option value="<%= emp.id %>">
                                                            <%= emp.name %> (<%= emp.email %>)
                                                        </option>
                                                        <% }) %>
                                                            <% } else { %>
                                                                <option disabled>No available employees</option>
                                                                <% } %>
                                            </select>
                                        </div> -->

                                        <button type="submit" class="btn btn-primary w-100">Create Department</button>
                                    </form>
                </div>
            </div>
        </div>

        <!-- jQuery -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <!-- Select2 JS -->
        <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

        <%- contentFor('FooterJs') %>
            <!-- <script src="/assets/js/departments/create-department.js"></script> -->
            <script>
                // console.log("Select2 exists?", $.fn.select2);
                $(document).ready(function () {
                    // Initialize Select2
                    $('#assignedEmployeeIds').select2({
                        placeholder: "Select employees",
                        allowClear: true,
                        width: '100%'
                    });
                })
            </script>